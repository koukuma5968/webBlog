<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.model.sql.mapper.ArticleMapper">

	<select id="SEL_ARTILCE_MNG" resultType="com.model.sql.dto.ArticleMNG" parameterType="com.param.ParamBean">
		SELECT 
		  A.ID, 
		  A.NAME,
		  A.TITLE, 
		  A.REG_DATE, 
		  A.UP_DATE, 
		  A.CATEGORY_ID, 
		  B.NAME AS CATEGORY_NAME, 
		  A.LANGUAGE_ID, 
		  C.NAME AS LANGUAGE_NAME 
        FROM 
          ARTICLE_MNG A,
          CATEGORY_MNG B,
          LANGUAGE_MNG C 
        WHERE 
          A.CATEGORY_ID = B.ID 
        AND 
          A.LANGUAGE_ID = C.ID 
        <choose>
          <when test="type == 1">
          AND 
            A.CATEGORY_ID = #{id} 
          </when>
          <when test="type == 2">
          AND 
            A.LANGUAGE_ID = #{id} 
          </when>
        </choose>
        ORDER BY A.UP_DATE DESC
	</select>

    <select id="SEL_ARTILCE_MNG_NAME" resultType="com.model.sql.dto.ArticleMNG" parameterType="com.param.ParamBean">
        SELECT 
          A.TITLE 
        FROM 
          ARTICLE_MNG A 
        WHERE 
          A.NAME = #{path} 
    </select>

    <select id="SEL_SIDE_LINK" resultType="com.model.sql.dto.SideLink" parameterType="com.param.ParamBean">
        SELECT 
          LINK_ID,
          LINK_TEXT
        FROM 
          SIDE_LINK 
        WHERE
          ARTICLE_ID = #{id}
        ORDER BY INDEX_ID
    </select>

    <select id="SEL_CATEGORY_MNG" resultType="com.model.sql.dto.CategoryMng">
        SELECT 
          ID,
          NAME
        FROM 
          CATEGORY_MNG 
        ORDER BY ID
    </select>

    <select id="SEL_CATEGORY_MNG_NAME" resultType="com.model.sql.dto.CategoryMng" parameterType="com.param.ParamBean">
        SELECT 
          NAME
        FROM 
          CATEGORY_MNG 
        WHERE 
          ID = #{id}
    </select>

    <select id="SEL_LANGUAGE_MNG" resultType="com.model.sql.dto.LanguageMng">
        SELECT 
          ID,
          NAME
        FROM 
          LANGUAGE_MNG 
        ORDER BY ID
    </select>

    <select id="SEL_LANGUAGE_MNG_NAME" resultType="com.model.sql.dto.LanguageMng" parameterType="com.param.ParamBean">
        SELECT 
          NAME
        FROM 
          LANGUAGE_MNG 
        WHERE 
          ID = #{id}
    </select>

</mapper>